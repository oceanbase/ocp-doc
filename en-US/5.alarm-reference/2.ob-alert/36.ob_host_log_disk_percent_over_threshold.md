# ob_host_log_disk_percent_over_threshold

## Description

This alert is triggered when the usage of the disk where the log directory of the OBServer locates exceeds the threshold.

  <main id="notice" type='explain'>
    <h4>Note</h4>
    <p>The default data directory for the OBServer is <code>/data/log1</code>.</p>
  </main>

## Alert information

|            Trigger method             | Alert level | Scope  |
|---------------------------------------|-------------|--------|
| Based on the expression of the metric | Critical    | Server |

## Alert rule

|            Metric             | Default threshold | Source | Duration | Detection cycle | Elimination cycle |
|-------------------------------|-------------------|--------|----------|-----------------|-------------------|
| ob_log_disk_usage_percent | 85                | Host   | 0s       | 60s             | 5 min             |

## Alert templates

* Overview: \${alarm_target} ${alarm_name}

* Details: \${alarm_target} \${alarm_name}. The disk usage of the mount point \${mount_point} of the log directory \${log_disk_path} is \${value}, exceeding the \${alarm_threshold} threshold.

* Overview example: ob_cluster=C1-1000:svr_ip=xxx.xxx.xxx.xxx. The disk usage of the disk where the log directory of the OBServer locates exceeds the threshold.

* Details example: ob_cluster=C1-1000:svr_ip=xxx.xxx.xxx.xxx. The disk usage of the disk where the log directory of the OBServer locates exceeds the threshold. The disk usage of the mount point /data/log1 of the log directory /data/log1 is 98.0%, exceeding the threshold of 85.0%.

## Impact on the system

When the free disk space for the logs of OBServer is insufficient, the OBServer may not work properly.

## Possible cause

The directory stores excessive files generated by other programs.

## Solution

1. Run the `df` command to check whether the disk usage of the `/data/log1` directory exceeds the threshold.

2. If yes, run the following command to find the directories that occupy the most space and the largest files.

   ```shell
   # Find the top five directories that occupy the most space.
   du -a /data/log1 | sort -n -r | head -n 5
   
   # Find the five largest files.
   cd /data/log1 && find -type f -exec du -Sh {} + | sort -rh | head -n 5
   ```

3. Delete unwanted files.
