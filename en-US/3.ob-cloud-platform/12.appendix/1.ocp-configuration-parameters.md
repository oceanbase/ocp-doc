OCP configuration parameters
=================================================

This topic lists all system parameters in OceanBase Cloud Platform (OCP) for reference by OCP admins. After a parameter is modified, the modification takes effect in about ten minutes. Some parameters only take effect after OCP Server restarts. The need for restart is indicated in the description column of the tables.

Global configuration
-----------------------------------------



|           **Parameter**            |   **Default value**   |                                                                                                                           **Description**                                                                                                                           |
|------------------------------------|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ocp.version                        | 2.5.0                 | The version of OCP.                                                                                                                                                                                                                                                 |
| server.port                        | 8080                  | Specifies the port number of an application. Default value: 8080. A restart is required for a modification to take effect.                                                                                                                                          |
| ocp.env                            | private               | The OCP environment. It is compatible with OCP V2.3.x and earlier.                                                                                                                                                                                                  |
| ocp.site.url                       | `http://localhost:8080` | The URL for accessing the OCP website. The URL must start with HTTP. HTTPS is not supported. It must contain the virtual IP address, domain name, or port number. It must not end with a forward slash (/). Example value: `http://localhost:8080`.                   |
| ocp.config-url.site.url            |                       | The URL for accessing the OCP config url service. The default value is empty, indicating that the URL specified for the ocp.site.url parameter is used. If the config url service is deployed separately, you must set a value different from that of ocp.site.url. |
| ocp.config-url.use-request-address | TRUE                  | The URL for the requests used by responses in the config url service. The default value is TRUE. If it is set to FALSE, responses will use the URL specified for the ocp.config-url.site.url parameter.                                                             |
| ocp.system.default.timezone        |                       | The default time zone of OCP. If this parameter is not specified, the default time zone of the system is used. A restart is required for a modification to take effect.                                                                                             |
| ocp.system.default.language        | zh-CN                 | The system default language, which is not the frontend display language. The default value of zh-CN is used if this parameter is not specified. A restart is required for a modification to take effect.                                                            |
| ocp.active.standby.cluster.enabled | TRUE                  | Specifies whether to support hot backup for OceanBase Database. Hot backup is supported by default. It is disabled when OCP upgrades to V2.4.x from an earlier version. To enable it, make sure that the OBProxy version is not earlier than V1.7.2.                |



Security and logon
---------------------------------------



|            **Parameter**             |                                                                                                             **Default value**                                                                                                             |                                                                                                                                **Description**                                                                                                                                 |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| server.servlet.session.timeout       | 30m                                                                                                                                                                                                                                       | The timeout value for session logons and sessions. Default value: 30m. Minimum value: 60s. If no unit is specified, the default unit of second is used.                                                                                                                        |
| ocp.iam.auth                         | local                                                                                                                                                                                                                                     | Web logon option. Valid values: local (for OCP accounts in the local MetaDB) and buc (for Alibaba Group employee accounts). Default value: local. A restart is required for a modification to take effect.                                                                     |
| ocp.iam.auth.whitelist               | /api/v2/time,/ocp/obpaas/.\*,/gateway.do,.\*Action=(ObRootServiceInfo\|ObRootServiceRegister\|ObIDCRegionInfo\|GetObProxyConfig\|AllocateClusterIdByNameAndIdx\|DeleteObRootServiceInfoByClusterName\|GetObRootServiceInfoUrlTemplate).\* | The whitelist for API operations that do not require a password. It is a string that consists of API URLs, separated with commas. Regular expressions are supported. Default value: /api/v2/time. A restart is required for a modification to take effect.                     |
| ocp.iam.auth.basic.enabled           | TRUE                                                                                                                                                                                                                                      | Specifies whether to enable the Basic Auth logon mode, which is generally used by clients such as applications and SDKs. Default value: TRUE. You can enable this feature at the same time as ocp.iam.auth. A restart is required for a modification to take effect.           |
| ocp.iam.csrf.enabled                 | TRUE                                                                                                                                                                                                                                      | Specifies whether to enable protection against cross-site request forgery (CSRF). We recommend that you enable this feature for web-based logons. Default value: TRUE. A restart is required for a modification to take effect.                                                |
| ocp.iam.csrf.url.excluded            | /api/v2/iam/login.\*,/ocp/obpaas/.\*,/gateway.do,.\*Action=(ObRootServiceInfo\|ObRootServiceRegister\|ObIDCRegionInfo\|GetObProxyConfig\|AllocateClusterIdByNameAndIdx\|DeleteObRootServiceInfoByClusterName).\*                          | The list of URLs for which CSRF protection is skipped. Regular expressions are supported. Default value: /api/v2/iam/login.\*. This parameter only takes effect when CSRF protection is enabled. The URL is a complete string that contains the path and the query parameters. |
| ocp.iam.login.max-attempts           | 5                                                                                                                                                                                                                                         | The maximum number of consecutive unsuccessful logon attempts allowed. When this threshold is exceeded, the client IP address is temporarily blocked. Default value: 5.                                                                                                        |
| ocp.iam.login.lockout-minutes        | 30                                                                                                                                                                                                                                        | The amount of time a client IP address is blocked after the maximum number of unsuccessful logon attempts is exceeded. Default value: 30. Unit: minutes.                                                                                                                       |
| ocp.iam.login.client.max-attempts    | 20                                                                                                                                                                                                                                        | The maximum number of consecutive logon attempts allowed for a client. When this threshold is exceeded, the client IP address is temporarily blocked. Default value: 20                                                                                                        |
| ocp.iam.login.client.lockout-minutes | 10                                                                                                                                                                                                                                        | The amount of time a client IP address is blocked after the maximum number of logon attempts is exceeded. Default value: 10. Unit: minutes.                                                                                                                                    |



OCP MetaDB connections
-------------------------------------------



|              **Parameter**              |  **Default value**  |                                                                                                                    **Description**                                                                                                                     |
|-----------------------------------------|---------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| spring.datasource.druid.name            | metadb-connect-pool | The name of the Druid connection pool of **MetaDB** . A restart is required for a modification to take effect.                                                                                                                      |
| spring.datasource.druid.initialSize     | 10                  | The number of physical connections created upon initialization. A restart is required for a modification to take effect.                                                                                                                               |
| spring.datasource.druid.minIdle         | 2                   | The minimum connection pool size. A restart is required for a modification to take effect.                                                                                                                                                             |
| spring.datasource.druid.maxActive       | 100                 | The maximum connection pool size. A restart is required for a modification to take effect.                                                                                                                                                             |
| spring.datasource.druid.testWhileIdle   | TRUE                | We recommend that you set this parameter to **TRUE** , because it enhances security without affecting performance. Tests when you apply for a connection. A restart is required for a modification to take effect.                                     |
| spring.datasource.druid.keepAlive       | TRUE                | For connections within the number of minIdle in the connection pool, if the idle time exceeds minEvictableIdleTimeMillis (default value: 1800 seconds), the keepAlive operation is performed. A restart is required for a modification to take effect. |
| spring.datasource.druid.validationQuery | SELECT 1 FROM DUAL  | A SQL statement used to verify whether a connection is valid. A restart is required for a modification to take effect.                                                                                                                                 |
| spring.datasource.druid.maxWait         | 2000                | The maximum wait time for obtaining a connection. Unit: milliseconds. A restart is required for a modification to take effect.                                                                                                                         |
| spring.datasource.druid.keepAlive       | TRUE                | For connections within the number of minIdle in the connection pool, if the idle time exceeds minEvictableIdleTimeMillis (default value: 1800 seconds), the keepAlive operation is performed. A restart is required for a modification to take effect. |



OCP MonitorDB connections
----------------------------------------------



|            **Parameter**            |               **Default value**                |                                                                                                                      **Description**                                                                                                                       |
|-------------------------------------|------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ocp.monitorDB.host                  | xxx.xxx.xxx.xxx                                 | The name of the MonitorDB host.                                                                                                                                                                                                                            |
| ocp.monitorDB.port                  | 2888                                           | The port of the MonitorDB.                                                                                                                                                                                                                                 |
| ocp.monitorDB.database              |                                                | The database name of MonitorDB.                                                                                                                                                                                                                            |
| ocp.monitorDB.password              | root                                           | The password of MonitorDB.                                                                                                                                                                                                                                 |
| ocp.monitorDB.username              | root@ocp_meta#obocp                            | The username of MonitorDB.                                                                                                                                                                                                                                 |
| ocp.monitorDB.driverClassName       | com.alipay.oceanbase.obproxy.mysql.jdbc.Driver | The jdbc driver. A restart is required for a modification to take effect.                                                                                                                                                                                  |
| ocp.monitorDB.druid.name            | monitorDB-connect-pool                         | The name of the Druid connection pool. A restart is required for a modification to take effect.                                                                                                                                                            |
| ocp.monitorDB.druid.initialSize     | 10                                             | The number of physical connections created upon initialization. A restart is required for a modification to take effect.                                                                                                                                   |
| ocp.monitorDB.druid.minIdle         | 2                                              | The minimum connection pool size. A restart is required for a modification to take effect.                                                                                                                                                                 |
| ocp.monitorDB.druid.maxActive       | 100                                            | The maximum connection pool size. A restart is required for a modification to take effect.                                                                                                                                                                 |
| ocp.monitorDB.druid.testWhileIdle   | TRUE                                           | We recommend that you set this parameter to TRUE, because it enhances security without affecting performance. Tests when you apply for a connection. A restart is required for a modification to take effect.                                              |
| ocp.monitorDB.druid.validationQuery | SELECT 1 FROM DUAL                             | A SQL statement used to verify whether a connection is valid. A restart is required for a modification to take effect.                                                                                                                                     |
| ocp.monitorDB.druid.maxWait         | 2000                                           | The maximum wait time for obtaining a connection. Unit: milliseconds. A restart is required for a modification to take effect.                                                                                                                             |
| ocp.monitorDB.druid.keepAlive       | TRUE                                           | For connections within the number of minIdle in the connection pool, if the idle time exceeds minEvictableIdleTimeMillis (default value: 1800 seconds), the keepAlive operation will be executed. A restart is required for a modification to take effect. |



Host
-------------------------



|                 **Parameter**                  | **Default value** |                                                                                                              **Description**                                                                                                               |
|------------------------------------------------|-------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ocp.host.remote-command.default-timeout-millis | 30000             | The default timeout value for remote commands on the host. Unit: milliseconds.                                                                                                                                                             |
| ocp.host.remote-command.min-timeout-millis     | 30000             | The minimum timeout value for remote commands on the host. The actual timeout value will not be lower than this value. Unit: milliseconds.                                                                                                 |
| ocp.host.ssh-ping.max-delay-millis             | 3000              | The maximum time difference between the request and response for a whoami command sent by the OCP server through SSH. When the actual delay exceeds this value, some operations such as adding a host may be affected. Unit: milliseconds. |
| ocp.host.check.clock-diff.max-diff             | 500               | The maximum difference between the time of ocp server and that of remote servers. When the actual time difference exceeds this value, host management and monitoring can be affected. Unit: milliseconds.                                  |



Alerting
-----------------------------



|              **Parameter**              | **Default value** |                                                                                                         **Description**                                                                                                          |
|-----------------------------------------|-------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ocp.alarm.send.once-timeout-ms          | 10000             | The timeout value for the delivery of a single alert.                                                                                                                                                                            |
| ocp.alarm.send.once-retry-times         | 3                 | The maximum number of retries for the delivery of a single alert.                                                                                                                                                                |
| ocp.alarm.send.batch-max                | 20                | The maximum number of new notifications that can be sent at a time.                                                                                                                                                              |
| ocp.alarm.send.retry-timeout-minutes    | 60                | Retry timeout value. A notification that exceeds this value will not be resent. Default value: 60. Unit: minutes.                                                                                                                |
| ocp.alarm.send.total-failed-retry-times | 3                 | The maximum number of retries after a notification fails to be sent.                                                                                                                                                             |
| ocp.alarm.send.total-timeout-seconds    | 60                | The timeout value for a notification sent by a single server.                                                                                                                                                                    |
| ocp.alarm.send.period.ms                | 2000              | The interval at which notifications are sent. A restart is required for a modification to take effect. Default value: 2000. Unit: milliseconds.                                                                                  |
| ocp.alarm.recover-message-template      |                   | Recovery message template for alert channels. The default value of this parameter is empty, meaning that the system-default template is used. If this parameter is specified, the specified value replaces the default template. |



Backup and recovery
----------------------------------------



|                     **Parameter**                      |                                         **Default value**                                          |                                                                                                                               **Description**                                                                                                                                |
|--------------------------------------------------------|----------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| backup.dbname.prefix                                   | backup                                                                                             | The custom prefix of the backup and recovery MetaDB. The default prefix is backup. After you modify this parameter, the new prefix will be used for new databases created during the initialization or upgrade of OCP, and the prefix of existing databases are not changed. |
| ocp.backup.agent.relation.file.full-path.name          | #{systemProperties'user.home'.concat('/ocp-server/etc/backup_agent_ob_relations_config.yaml')} | Describes the version of the backup and recovery module, the MetaDB that it depends on, and its matching relationship with the version of the OceanBase cluster.                                                                                                             |
| ocp.backup.alarm.backup-data-retention-days            | 7                                                                                                  | The number of days for which backup data is retained.                                                                                                                                                                                                                        |
| ocp.backup.alarm.backup-liboblog-expire-days           | 7                                                                                                  | The number of days for which the backup liboblog is retained.                                                                                                                                                                                                                |
| ocp.backup.alarm.last-data-backup-max-interval-minutes | 1440                                                                                               | The period to check for failed baseline backup tasks. Default value: 1440 (one day). Unit: minutes.                                                                                                                                                                          |
| ocp.backup.alarm.inc-backup-delay-threshold            | 3600                                                                                               | The alert threshold for delays in incremental backup. Unit: seconds.                                                                                                                                                                                                         |
| ocp.backup.alarm.base-backup-last-finished-threshold   | 12960                                                                                              | The maximum interval between two baseline backup operations. Default value: 12960 (nine days). Unit: minutes.                                                                                                                                                                |
| ocp.backup.alarm.base-backup-timeout                   | 10                                                                                                 | The timeout value for the scheduling of baseline backup. Unit: minutes.                                                                                                                                                                                                      |
| ocp.backup.storage.collect.task.timeout                | 9000                                                                                               | The timeout value for each directory storage collection task during backup and recovery.                                                                                                                                                                                     |
| ocp.backup.storage.collect.rpc.timeout                 | 3000                                                                                               | The timeout value for each remote procedure call (RPC) during a storage collection task of backup and recovery. This parameter is used when a storage collection task requires more than one RPC.                                                                            |
| ocp.backup.storage.collect.max.retry.times             | 2                                                                                                  | The maximum number of retries for each storage collection task during backup and recovery.                                                                                                                                                                                   |



OCP-Agent and OB-Agent
-------------------------------------------



|     **Parameter**     |                   **Default value**                   |           **Description**            |
|-----------------------|-------------------------------------------------------|--------------------------------------|
| ocp.agent.rpc.port    | 62888                                                 | OCP-Agent server port, used by RPCs. |
| ocp.ob-agent.version  | t-oceanbase-ob-agent-2.4.0-1884988.alios7.x86_64.rpm  | OB-Agent version.                    |
| ocp.ocp-agent.version | t-oceanbase-ocp-agent-2.4.0-1884049.alios7.x86_64.rpm | OCP-Agent version.                   |



OBProxy connections
----------------------------------------



|             **Parameter**              | **Default value** |                                                      **Description**                                                       |
|----------------------------------------|-------------------|----------------------------------------------------------------------------------------------------------------------------|
| ocp.system.obproxy.address             | localhost         | The address of OBProxy, used for connecting to OceanBase clusters.                                                         |
| ocp.system.obproxy.metadb.cluster-name | obdv1             | The cluster in which OBProxy MetaDB is located. This parameter can be ignored if the deployed OBProxy does not use MetaDB. |
| ocp.system.obproxy.metadb.database     | obproxy           | The database name of OBProxy MetaDB. This parameter can be ignored if the deployed OBProxy does not use MetaDB.            |
| ocp.system.obproxy.metadb.user         | root@obproxy      | The OBProxy MetaDB user. This parameter can be ignored if the deployed OBProxy does not use MetaDB.        |
| ocp.system.obproxy.port                | 2883              | The port of OBProxy, used for connecting to OceanBase clusters.                                                            |



Background tasks and scheduling
----------------------------------------------------



|            **Parameter**             | **Default value** |                                                                                   **Description**                                                                                   |
|--------------------------------------|-------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ocp.task.executor.core-pool-size     | 16                | The core thread pool size for task execution threads. Default value: 16. A restart is required for a modification to take effect.                                                   |
| ocp.task.executor.keep-alive-seconds | 120               | The amount of time to keep idle sessions in the thread pool for task execution threads. A restart is required for a modification to take effect. Default value: 120. Unit: seconds. |
| ocp.task.executor.max-pool-size      | 64                | The maximum size of the thread pool for task execution thread. Default value: 64. A restart is required for a modification to take effect.                                          |
| ocp.task.executor.queue-capacity     | 1000              | The size of the thread queue for tasks execution. Default value: 1000. A restart is required for a modification to take effect.                                                     |



OceanBase remote connection management
-----------------------------------------------------------



|                **Parameter**                 | **Default value** |                                                      **Description**                                                       |
|----------------------------------------------|-------------------|----------------------------------------------------------------------------------------------------------------------------|
| obsdk.connectors.cache.cleanup.period.second | 300               | The time interval at which obsdk cleans the cache of connectors. Valid values: 30-1800. Default value: 300. Unit: seconds. |
| obsdk.connectors.cache.max.idle.second       | 3600              | The expiration time for idle obsdk connectors. Valid values: 300-18000. Default value: 3600. Unit: seconds.                |
| obsdk.connectors.cache.size                  | 50                | The obsdk connector cache size. Valid values: 5-100. Default value: 50.                                                    |
| obsdk.connectors.print.sql                   | TRUE              | Specifies whether to print SQL statements in obsdk. Default value: TRUE.                                                   |
| obsdk.connectors.slow.query.threshold.millis | 1000              | The threshold for slow queries in obsdk. Default value: 1000. Unit: milliseconds.                                          |
| obsdk.ob.connection.mode                     | proxy             | Specifies the method to connect to OceanBase. Valid values: proxy or direct. Default value: proxy.                         |



Log
------------------------



|          **Parameter**          |       **Default value**       |                                                                                                                         **Description**                                                                                                                         |
|---------------------------------|-------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| logging.file                    | ${user.home}/logs/ocp/ocp.log | The complete log file name, which contains the absolute path and the file name. System environment variables in Linux and MacOS, such as ${HOME}, and Java system variables, such as ${user.home}, are supported. Default value: ${user.home}/logs/ocp/ocp.log. |
| logging.file.max-history        | 100                           | The maximum number of archived log files to keep. This parameter is used after logging.file is configured.                                                                                                                                                      |
| logging.file.max-size           | 100MB                         | The size of a log file, such as 30MB or 1GB. This parameter is used after logging.file is configured. Default value: 100MB.                                                                                                                                     |
| logging.level.com.alipay.ocp    | INFO                          | The log level of OCP. Default value: INFO.                                                                                                                                                                                                                      |
| logging.level.org.hibernate.SQL | INFO                          | The log level of SQL statements in the Spring framework. Default value: INFO.                                                                                                                                                                                   |
| logging.level.web               | INFO                          | The log level of the Spring web framework. Default value: INFO.                                                                                                                                                                                                 |



File management
------------------------------------



|             **Parameter**              |                      **Default value**                       |                                              **Description**                                               |
|----------------------------------------|--------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|
| ocp.file.local.dir                     | #{systemProperties\['user.home'\].concat('/data/files')}     | The local storage path of files in the OCP file module.                                                    |
| ocp.file.local.built-in.dir            | #{systemProperties\['user.home'\].concat('/ocp-server/lib')} | The local storage path of built-in files in the file module of OCP.                                        |
| ocp.file.default-block-split-size      | 1048576                                                      | The default size of a file block in the file module of OCP. Default value: 1048576 (1 MB). Unit: bytes.    |
| ocp.file.max-concurrent-count          | 16                                                           | The maximum concurrency for file processing on a single node in the file module of OCP. Default value: 16. |
| ocp.file.try-lock-timeout-milliseconds | 10000                                                        | The lock overtime for a single node in the file module of OCP. Default value: 10000. Unit: milliseconds.   |



Throttling
-------------------------------



|                  **Parameter**                  | **Default value** |                                                                      **Description**                                                                       |
|-------------------------------------------------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ocp.iam.rate-limit.enabled                      | TRUE              | Specifies whether throttling is enabled on the global level. This parameter can be dynamically enabled and disabled.                                       |
| ocp.iam.rate-limit.internal-api.connect.timeout | 1000              | The connection timeout value for calls made to the internal throttling APIs. A restart is required for a modification to take effect. Unit: milliseconds.  |
| ocp.iam.rate-limit.internal-api.read.timeout    | 1000              | The read timeout value for calls made to the internal throttling APIs. A restart is required for a modification to take effect. Unit: milliseconds.        |
| ocp.iam.rate-limit.task.schedule.period         | 3                 | The scheduling cycle of primary and secondary role management tasks in throttling. A restart is required for a modification to take effect. Unit: seconds. |
| ocp.iam.rate-limit.on-user.enabled              | TRUE              | Specifies whether throttling applies to users. This parameter can be dynamically enabled and disabled.                                                     |
