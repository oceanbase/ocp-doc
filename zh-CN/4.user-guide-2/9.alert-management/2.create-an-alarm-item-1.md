新建告警项 
==========================

OCP 系统内置了部分告警项满足您对业务的日常监控需求，除此以外您还可参考本节定制您业务所需的告警项。关于各内置告警项的详细信息您可参考 [告警参考](../../9.alarm-reference/1.alert-overview.md)。

前提条件 
-------------------------

当前登录 OCP 的用户为 ADMIN 角色或 ALARM_MANAGER 角色。

操作步骤 
-------------------------

1. 登录 OCP。

   

2. 在左侧导航栏中单击 **系统管理** \> **告警** 。

   

3. 在 **告警项配置** 页签右上角单击 **新建告警项** 。

   

4. 配置告警项的 **规则信息** 。

   1. 设置 **告警项所属范围** 和 **匹配对象** 。

      
   
   2. 设置告警 **触发条件** 。其中：

      * 有运算规则

        监控表达式触发的告警，需您配置告警上报的运算规则。
        * 指标：在 **应用** 下拉框中选择，具体指标含义可在 [告警参考](../../9.alarm-reference/1.alert-overview.md) 中搜索对应的指标了解。

          单击 **应用** 下拉框中的 **添加指标** 按钮，您可进行自定义告警指标。

          ![Image 98](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1102139461/p426827.png)
          
        
        * 运算规则：您可根据业务需求，配置多个运算规则。系统将根据您配置的告警规则，上报不同级别的告警。多个规则之间不能存在相同的阈值、不能存在相同的级别，因此最多只能配置 5 个规则。

          
        
        * 持续时间：配置告警持续时间，为 0 时表示符合运算规则立即触发。

          
        

        
      
      * 无运算规则

        非监控表达式触发的告警，需您配置该告警的等级。
        
      

      
   
   3. 设置 **告警周期** 。

      **告警周期** 又指检测周期，系统每个检测周期检查告警是否满足触发条件。检测周期默认为 60 秒。
      * 上报告警前，每 60 秒检测一次触发条件是否达到，达到则上报告警。

        
      
      * 上报告警后，每个 **告警周期** 检查告警是否依然还满足触发条件，满足则持续上报。

        
      

      
   
   4. 设置告警的 **消除周期** 。

      即设置告警上报的持续时间。消除周期设置完成后，系统会在所设置的时间周期后对该告警进行消除。消除周期默认为 5 分钟。
      
   

   

   ![Image 86](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2102139461/p426830.png)
   

5. 配置告警项的 **基本信息** 。

   1. 设置 **告警项名称** 。

      第三方应用通过 **告警项名称** 对接 OCP 中的告警。仅支持字母、数字和下划线，建议遵循如下命名规则：
      * OB 集群相关的告警，以 ob_cluster_ 为前缀。

        
      
      * OB 租户相关的告警，以 ob_tenant_ 为前缀。

        
      
      * OB 服务器相关的告警，以 ob_host_ 为前缀。

        
      
      * OCP 服务器相关的告警，以 host_ 为前缀。

        
      
      * OCP 服务相关的告警，以 ocp_service_ 为前缀。

        
      
      * OBProxy 集群相关的告警，以 obproxy_cluster_ 为前缀。

        
      
      * OBProxy 服务器相关的告警，以 obproxy_host_ 为前缀。

        
      

      
   
   2. 设置 **说明** 。

      需能够简要表明该告警的作用。
      
   
   3. 根据页面提示设置 **告警概述模板** 。

      告警概述模板在通道的模板字段中被引用，对应的变量名为 alarm_summary。
      
   
   4. 根据页面提示设置 **告警详情模板** 。

      告警详情模板在通道的模板字段中被引用，对应的变量名为 alarm_description。
      
   
   5. （可选）选择是否 **禁用告警** 。

      对于系统内置告警项及创建后暂时不再使用的告警项，您后续可在此处对其进行禁用。
      
   

   

6. 单击 **提交** 。

   



