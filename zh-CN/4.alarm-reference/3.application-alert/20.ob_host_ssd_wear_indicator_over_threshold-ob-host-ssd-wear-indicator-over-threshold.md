# ob_host_ssd_wear_indicator_over_threshold 服务器 SSD 使用百分比超限

## 告警描述

检查服务器 SSD 的使用百分比，当超过阈值是触发该告警。

## 告警原理

下表列出了该告警监控逻辑中涉及的关键参数。

| **参数** | **值** |
| --- | --- |
| 监控指标 | `ssd_wear_indicator`：该指标值表示服务器 SSD 的使用百分比，值越高说明 SSD 的使用率越高。 |
| 指标来源 | 执行 staragent 自带的检测 SSD 使用率的脚本。 |
| 采集指标 | ssd_wear_indicator |
| 监控表达式 | max(ssd_wear_indicator{@LABELS}) by (@GBLABELS) |
| 采集周期 | 1 秒 |

## 规则信息

| **监控指标** | **默认阈值（单位：%）** | **持续时间** | **告警周期** | **消除周期** |
| --- | --- | --- | --- | --- |
| ssd_wear_indicator | 95 | 0 秒 | 60 秒  | 5 分钟 |

## 告警信息

| **告警触发方式** | **告警等级** | **范围** |
| --- | --- | --- |
| 基于监控指标的表达式 | 严重 | 服务器 |

## 告警模板

* 告警概述
  * 模板：\${alarm_target} ${alarm_name}
  * 样例：svr_ip=192.168.0.1 服务器 SSD 使用百分比超限
* 告警详情
  * 模板：\${alarm_target} \${alarm_name} SSD 使用百分比 \${value}， 超过 ${alarm_threshold}
  * 样例：svr_ip=192.168.0.1 服务器 SSD 使用百分比超限 SSD 使用百分比 97， 超过 95

## 对系统的影响

SSD 使用百分比达到 100% 后，SSD 将不能再使用。故需要对 SSD 的使用率监控，其影响有：

* SSD 无法写如数据。比如 OceanBase 数据盘、OceanBase 日志盘、OceanBase 安装盘都可能是 SSD 的，转储、日志、合并都需要将数据写入硬盘。
* 无法读取 SSD 数据，当无法写数据时，可能进程会被卡住，进而影响读服务。

## 可能原因

* SSD 损坏，导致使用率超过限制。
* SSD 达到了其使用寿命。SSD 的擦写次数有上限，可能已接近使用上限。

## 处理方法

1. 排查 SSD 是否写满，是否有损坏。
2. 联系技术支持人员使用专业的检测工具，检查 SSD 剩余可擦写次数，若接近上限，请及时更换 SSD。
