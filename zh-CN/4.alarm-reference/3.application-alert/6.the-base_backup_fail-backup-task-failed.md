base_backup_fail 数据备份任务失败 
==============================================



**告警描述** 
-----------------------------

该告警监测 OCP 发起的数据备份任务是否失败，失败则上报告警。

告警原理 
-------------------------

OCP-Server 设置了每分钟的定时检查任务，当出现数据备份失败或数据备份长时间未成功时，触发该告警。具体分为如下场景：

* 查询最近 5 分钟是否有数据备份失败的任务，有则上报告警。

  

* 检查逻辑备份时长是否超过备份超时的报警阈值，有则上报告警。

  

* 检查物理备份时长是否超过备份超时的报警阈值，有则上报告警。

  




**规则信息** 
-----------------------------



| 监控指标 | 默认阈值 | 持续时间 | 检测周期 | 消除周期 |
|------|------|------|------|------|
| NA   | NA   | 0 秒  | 60 秒 | 5 分钟 |



**告警信息** 
-----------------------------



|  告警触发方式  | 告警等级 | 范围 |
|----------|------|----|
| OCP 操作提醒 | 严重   | 服务 |



**告警模板** 
-----------------------------

* 告警概述模板: ${alarm_target} ${alarm_name}

  

* 告警详情模板: ${alarm_target} ${alarm_name}

  

* 告警概述样例: ob_cluster=C1-1000 数据备份任务失败

  

* 告警详情样例: ob_cluster=C1-1000 数据备份任务失败

  




其中，${alarm_target} 的格式为 ob_cluster=xxxxxxx:svr_ip=xxxxxx。

* ob_cluster 为产生告警的集群的名称。

  

* svr_ip 为产生告警的集群中对应 OBServer 的 IP。

  




**对系统的影响** 
-------------------------------

数据备份失败将导致租户可能无法恢复。

**可能原因** 
-----------------------------

存在多种原因，具体需要查看失败原因进行定位。

**处理方法** 
-----------------------------

查看备份组件的日志，定位异常原因。

组件日志 agentserver.log 位于备份服务所在服务器的 /home/admin/oceanbase/log 目录下。

