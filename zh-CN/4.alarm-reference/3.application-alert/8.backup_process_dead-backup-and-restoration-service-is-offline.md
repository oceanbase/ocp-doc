backup_process_dead 备份恢复服务离线
=================================================



**告警** **描述**
----------------------------------

该告警监测备份恢复服务是否离线，当备份恢复组件进程停止时，上报告警。

告警原理
-------------------------

OCP-Server 通过 Agent 执行如下命令来分别检测备份服务、恢复服务是否离线。

```unknow
cd /home/admin/oceanbase && bash ./bin/agent.sh exist_restore
cd /home/admin/oceanbase && bash ./bin/agent.sh exist_backup
```


返回 1 表示服务在线，否则服务离线，离线时触发告警。

**规则信息**
-----------------------------



| 监控指标 | 默认阈值 | 持续时间 | 检测周期 | 消除周期 |
|------|------|------|------|------|
| NA   | NA   | 0 秒  | 60 秒 | 5 分钟 |



**告警信息**
-----------------------------



|  告警触发方式  | 告警等级 | 范围 |
|----------|------|----|
| OCP 操作提醒 | 停服   | 服务 |



**告警模板**
-----------------------------

* 概述模板: ${alarm_target} ${alarm_name}



* 详情模板: ${alarm_target} ${alarm_name}



* 概述样例: service=Backup:svr_ip=192.168.1.1 备份恢复服务离线



* 详情样例: service=Backup:svr_ip=192.168.1.1 备份恢复服务离线






其中，${alarm_target} 的格式为 ob_cluster=xxxxxxx:svr_ip=xxxxxx。

* ob_cluster 为产生告警的集群的名称。



* svr_ip 为产生告警的集群中对应 OBServer 的 IP。






**对系统的影响**
-------------------------------

将导致该服务对应的集群无法备份。

**可能原因**
-----------------------------

组件运行异常或者配置错误。

处理方法
-------------------------

具体原因请查看组件日志定位异常原因。

组件日志位于备份恢复服务所在服务器的 /home/admin/oceanbase/log 目录下，包括 agentserver.log 和 agentrestore.log。
