ob_host_tcp_retrans_percent_over_threshold OB 服务器 TCP 重传率超限 
================================================================================



**告警描述** 
-----------------------------

该告警监测 OBServer 的 TCP 重传率是否过高，过高则触发告警。

告警原理 
-------------------------

下表列出了该告警监控逻辑中涉及的关键参数。


|  参数   |                                               值                                               |
|-------|-----------------------------------------------------------------------------------------------|
| 监控指标  | ob_host_tcp_retrans_percent                                                                   |
| 指标来源  | ```tsar --check --tcp -s retran | awk -F '=' '{print $2}' ```  |
| 采集指标  | tcp_retrans                                                                                   |
| 监控表达式 | max(tcp_retrans{@LABELS}) by (@GBLABELS)                                                      |
| 采集周期  | 1 秒                                                                                           |



<main id="notice" type='explain'><h4>说明</h4><p>该指标来源与其他表达式触发的告警不同，是由 OCP-Agent 每个 <code>采集周期</code> 通过执行上述命令采集而来。</p></main>



**监控指标** ob_host_tcp_retrans_percent 的值表示 OBServer 的 TCP 重传率，当重传率大于阈值（默认为 10%）时触发告警。

**规则信息** 
-----------------------------



|            监控指标             | 默认阈值（单位：%） | 持续时间 | 检测周期 | 消除周期 |
|-----------------------------|------------|------|------|------|
| ob_host_tcp_retrans_percent | 10         | 0 秒  | 60 秒 | 5 分钟 |



**告警信息** 
-----------------------------



|   告警触发方式   | 告警等级 | 范围  |
|------------|------|-----|
| 基于监控指标的表达式 | 严重   | 服务器 |



**告警模板** 
-----------------------------

* 告警概述模板：${alarm_target} ${alarm_name}

  

* 告警详情模板：${alarm_target} ${alarm_name} TCP 重传率 ${value}， 超过 ${alarm_threshold}

  

* 告警概述样例：ob_cluster=C1-1000:svr_ip=xxx.xxx.xxx.xxx OB 服务器 TCP 重传率超限

  

* 告警详情样例：ob_cluster=C1-1000:svr_ip=xxx.xxx.xxx.xxx OB 服务器 TCP 重传率超限 TCP 重传率 11.0， 超过 10.0

  




**对系统的影响** 
-------------------------------

网络不稳定可能导致 OBServer 功能不正常，如 SQL 无法成功执行。

**可能原因** 
-----------------------------

常见于 OBServer 的网卡不稳定（例如，主备网卡频繁切换）、网络通讯故障的场景。

处理方法 
-------------------------

联系网络工程师排查网卡错误、网络故障。

若无网络工程师也可参考 [网络故障排查](../400.alarm-appendix/600.network-troubleshooting.md) 排查网络问题。
