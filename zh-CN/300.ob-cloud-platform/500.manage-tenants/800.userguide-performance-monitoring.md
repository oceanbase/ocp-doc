# 性能监控


本页面为您介绍 OCP 对租户性能进行监控的功能。

前提条件
-------------------------

已 [新建租户](../../3.ob-cloud-platform/5.manage-tenants/2.basic-tenant-operations/1.userguide-create-a-tenant.md)。

操作步骤
-------------------------

1. 登录 OCP 。



2. 选择 **租户** ，进入租户概览页面。



3. 在 **租户列表** 区域，选择待操作的租户并单击其租户名。



4. 在显示的页面的左侧导航栏上，单击 **性能监控** 。



5. 在 **数据筛选** 区域，通过如下方式查看性能数据。

   筛选条件说明如下标所示：


   |    **过滤条件**    |                                                                              **描述**                                                                               |
   |----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 选择时间（实时模式下不展示） | 选择某一段时间范围，用于返回这段时间范围内的数据。                                                                                                                                         |
   | 统计周期（实时模式下不展示） | 主要用于计算每个点数据的统计周期，支持按 **每分钟** 和 **每秒** 统计，分别对应了每分钟一个点或每秒钟一个点，OCP 同时也会根据选择的时间区间再去计算一个统计周期。 计算的规则是使返回的数据接近 1440 个点，如果选择的时间区间比较长，可能会出现统计周期大于 1 分钟的情况。 |
   | Zone           | 选择待查看的 Zone 。                                                                                                                                                     |
   | OBServer       | 选择待查看的 OBServer 。                                                                                                                                                 |


   * 输入过滤条件后，系统按 **选择的时间** 及 **统计周期** 展示性能监控数据。

      ![06091755](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7113323261/p282520.png)

     <main id="notice" type='explain'><h4>说明</h4><p>如需查看某一时间段内的详细趋势，可鼠标拖拽选中该区域，系统会放大显示该区域的趋势信息，双击该趋势图可恢复。</p></main>




   * 打开 **实时** 开关并选择需查看的 OBServer，系统实时展示该 OBServer 的性能数据。

      ![06091759](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7113323261/p282527.png)






6. 切换页签，分别查看集群的 **性能与 SQL** 、 **事务** 、 **存储与缓存** 的性能监控数据。

   此处所有监控项的具体含义及取值来源，请参考本文档 [监控指标](../../3.ob-cloud-platform/12.appendix/8.monitoring-metrics.md) 章节的内容。
   * 单击 **性能与 SQL** 页签，查看 SQL 执行相关的性能。性能与 SQL 相关的监控项可参考下表理解。



     |     监控项      |                                                                                                                                                                                                                                   说明                                                                                                                                                                                                                                   |
     |--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
     | QPS          | 平均每秒处理 SQL 语句数 <ul><li> all: 每秒处理 SQL 语句数 (times/s)   </li><li> select: 每秒处理 Select 语句数 (times/s)   </li><li> insert: 每秒处理 Insert 语句数 (times/s)  </li><li>update: 每秒处理 Update 语句数 (times/s)   </li><li> replace: 每秒处理 Replace 语句数 (times/s)   </li><li>delete: 每秒处理 Delete 语句数 (times/s) </li></ul>     |
     | 响应时间         | 响应时间 <ul><li> all: 服务端每条 SQL 语句平均处理耗时 (us)  </li><li> select: 服务端每条 Select 语句平均处理耗时 (us)   </li><li> insert: 服务端每条 Insert 语句平均处理耗时 (us)  </li><li> update: 服务端每条 Update 语句平均处理耗时 (us)  </li><li> replace: 服务端每条 Replace 语句平均处理耗时 (us)   </li><li>delete: 服务端每条 Delete 语句平均处理耗时 (us)   </li></ul>       |
     | 活跃会话数        | 活跃的会话数量（个）                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
     | SQL 执行计划类别   | SQL 执行计划类别 <ul><li>local: 每秒处理本地执行数 (times/s)  </li><li> remote: 每秒处理远程执行计划数 (times/s)   </li><li>distributed: 每秒处理分布式执行计划数 (times/s)  </li></ul>                                                                                                                                                                                                                                  |
     | 等待事件         | 每秒等待事件次数 (times/s)                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
     | 等待事件耗时       | 等待事件平均耗时 (us)                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
     | 请求等待队列       | 每秒 SQL 进入等待队列个数 (times/s)                                                                                                                                                                                                                                                                                                                                                                                                                                              |
     | 请求等待队列耗时     | SQL 请求在等待队列中的等待耗时 (us)                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
     | CPU 使用率      | CPU使用率 (%)                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
     | MEMStore 使用率 | MEMStore 使用率 (%)                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
     | Rpc 包耗时      | Rpc 收、发包耗时 <ul><li> in: Rpc 收包平均耗时 (us)   </li><li> out: Rpc 发包平均耗时 (us)  </li></ul>                                                                                                                                                                                                                                                                                                                           |
     | Rpc 包吞吐量     | 单位时间内Rpc 收、发包byte数据量 <ul><li> in: Rpc 收包吞吐量 (byte)   </li><li> out: Rpc 发包吞吐量 (byte)  </li></ul>                                                                                                                                                                                                                                                                                                               |



   * 单击 **事务** 页签，查看事务相关的性能。事务相关的监控项可参考下表理解。



     |  监控项   |          说明          |
     |--------|----------------------|
     | TPS    | 平均每秒处理事务数，单位：次/s。    |
     | 事务响应时间 | 服务端每个事务平均处理时间，单位：us。 |
     | 事务日志数  | 每秒提交的事务日志数（次/s）      |
     | 事务日志量  | 每秒提交的事务日志大小 （byte）   |
     | 事务日志耗时 | 服务端处理事务日志的平均耗时（us）   |
     | 锁等待    | 每秒事务锁等待次数            |
     | 等锁耗时   | 每个锁等待平均耗时（us）        |



   * 单击 **存储与缓存** 页签，查看存储与缓存相关的性能。存储与缓存相关的监控项可参考下表理解。



     |   监控项    |                                                                                                                                           说明                                                                                                                                           |
     |----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
     | MEMStore | 当前租户可写入数据内存 <ul><li> total: MEMStore 总大小 (MB)   </li><li> active: 活跃 MEMStore 大小 (MB)   </li><li> trigger: 触发合并阈值 (MB)   </li><li> limit: MEMStore的limit (MB)</li></ul>      |
     | IOPS     | 平均每秒 IO 次数 <ul><li>read: SSStore 每秒读次数 (times/s)   </li><li> write: SSStore 每秒写次数 (times/s)    </li></ul>                                                                                                                     |
     | IO 耗时    | 平均每次 IO 耗时 <ul><li> read: SSStore 每次读取平均耗时 (us)  </li><li> write: SSStore 每次写入平均耗时 (us)   </li></ul>                                                                                                                          |
     | IO 吞吐量   | 平均每秒 IO 数据量 <ul><li>read: SSStore 每秒读取数据量 (byte)  </li><li> write: SSStore 每秒写入数据量 (byte)  </li></ul>                                                                                                                        |
     | 缓存大小     | 缓存大小 <ul><li> block_cache: 块缓存大小 (MB)  </li><li> row_cache: 行缓存大小 (MB)   </li><li>plan_cache: 执行计划缓存大小 (MB)   </li></ul>                                                                            |
     | 缓存命中率    | 缓存命中率 <ul><li>block_cache: 块缓存命中率 (%)   </li><li>row_cache: 行缓存命中率 (%)  </li><li> plan_cache: 执行计划缓存命中率 (%)   </li></ul>                                                                         |
