新建租户 
=========================

租户（Tenant）既是各类数据库对象的容器，又是资源（CPU、Memory、IO等）的容器。您可以根据业务需求在集群中创建租户。

新建租户有以下两种方式：

* 在租户概览页面创建租户。

  

* 在指定集群的租户管理页面创建租户。

  




本文档为您展示指定集群的租户管理页面创建租户的操作步骤。

前提条件 
-------------------------

* 需要创建租户的集群为主集群，且状态为运行中。

  

* 当前登录用户具备系统管理员角色、OCP 租户管理员角色或其他拥有管理该集群权限的角色。

  




操作步骤 
-------------------------

1. 登录 OCP。

   

2. 单击左侧导航栏的 **集群** 。

   

3. 在 **集群列表** 区域选择待操作的集群并单击其集群名。

   

4. 在显示的页面的左侧导航栏上，单击 **租户管理** 。

   

5. 在页面右上角单击 **新建租户** 。

   ![10140956](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1657914361/p338584.png)

   

6. 填写 **基础信息** 。

   1. 集群默认为当前集群。

      
   
   2. 请输入 **租户名称** 。租户名称支持英文大小写字母、数字和下划线，长度为 2\~64 字符。

      
   

   

7. 填写 **Zone 信息** 。

   1. 为 z1、z2 和 z3 设置副本类型、Unit 规格和 Unit 数量。

      集群选定后，页面会根据所选集群的 zone 信息给出可配置的 zone 列表；对于无需做副本分布的 zone，可以通过最右侧的按钮删除该zone条目。
      * 副本类型支持全功能型副本、只读型副本和日志型副本。

        
      
      * OCP 内置了一套 Unit 规格；另外也可以在下拉列表的最下方点击按钮新增自定义规格。

        
      
      * 指定该 zone下的 Unit 数量。需要注意的是，unit 数量不能超过该 zone下 server个数。

        
      

      

      ![09091452](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1360562361/p325168.png)
      
   
   2. 对 **Zone 优先级** 进行排序。同时选择多个 Zone 穿梭到右侧后，可设置为同一优先级。
   
   
      ![p168852](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4532941261/p275674.png)

      
   

   

8. 填写 **基本设置** 。

   1. 设置 **管理员初始密码** 。支持随机生成。

      对于 MySQL 模式，其管理员账户为"root"。
      
   
   2. 设置 **租户模式** 。

      社区版 OCP 仅支持 MySQL 模式。
      
   
   3. 设置 **字符集** 。

      对于 MySQL 模式，可选字符集有：utf8mb4, binary, gbk, gb18030。缺省为utf8mb4。
      
   
   4. （可选）设置 **备注** 。

      
   
   5. 设置 **IP 地址白名单** 。

      * 此处可以指定该租户允许登录的客户端列表。如果不指定，默认配置为"%"，允许所有的客户端。自定义白名单列表时需要注意，OCP 机器地址以及所依赖的 OBProxy 地址必须在此名单中，否则 OCP 将无法管理此租户。

        * 默认配置：所有 IP 都可访问。

          
        
        * 自定义：设置 IP 白名单，白名单中的IP才能访问。

          
        

        
      
      * 白名单格式说明：

        * IP地址，示例：xxx.xxx.xxx.1,xxx.xxx.xxx.2

          
        
        * 子网/掩码，示例：xxx.xxx.xxx.1/24

          
        
        * 模糊匹配，示例：xxx.xxx.xxx.% 或 xxx.xxx.xxx._

          
        
        * 多种格式混合，示例：xxx.xxx.xxx.1,xxx.xxx.xxx.2,xxx.xxx.xxx.%,xxx.xxx.xxx._,xxx.xxx.xxx.1/24

          
        

        

        <main id="notice" type='explain'><h4>说明</h4><p>% 表示所有客户端都可以连接。</p></main>

        

        ![08182039](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1360562361/p307023.png)
        
      

      
   

   

9. 单击 **提交** 。

   



