# 主机规划

本节为您介绍部署社区版 OCP 需规划的主机数量、CPU 和内存等资源配置情况。

## 主机资源规划

### MetaDB 部署要求

MetaDB 用于存储除了监控数据的其它持久化数据，需要的资源相对较少，推荐在 OceanBase 中创建独立的租户用于 MetaDB，并最低分配给该租户 4 个 CPU、8GB 内存。

按照 OCP 管理的 OBServer 数量，推荐 MetaDB 租户每个副本的 CPU 和内存资源规则如下：

| **管理的机器数量（台）** | **CPU（核）** | **内存（GB）** |
|----------------|------------|------------|
| **≤** 10       | 4          | 8          |
| ≤ 50           | 8          | 16         |
| ≤ 100          | 16         | 32         |
| ≤ 200          | 32         | 64         |
| ≤ 400          | 64         | 128        |

### MonitorDB 部署要求

OCP 在运行过程中，会采集管理目标的各种性能数据，主要是 OceanBase 集群的数据，这些数据都会存储到 MonitorDB。推荐在 OceanBase 中创建独立的租户用于 MonitorDB，并最低分配给该租户 4 个 CPU、16G 内存。

按照 OCP 管理的 OBServer 数量，推荐 MonitorDB 租户每个副本的 CPU 和内存资源规则如下：

| **管理机器数量（台）** | **CPU（核心数）** | **内存（GB）** |
|---------------|--------------|------------|
| ≤10           | 4            | 16         |
| ≤50           | 16           | 64         |
| ≤100          | 32           | 128        |
| ≤200          | 64           | 256        |
| ≤400          | 128          | 512        |

### OCP 部署要求

OCP-Server 机器的 CPU 和内存资源配置参考如下表所示。以下配置是以每个 OBServer 中包含 10 个租户为标准，进行计算而得出的数据，请您根据实际情况进行计算，选择合适的 CPU 和内存。

| **管理的机器数量（台）** | **CPU（核）** | **内存（GB）** |
|----------------|------------|------------|
| **≤** 10       | 4          | 8          |
| ≤ 50           | 8          | 16         |
| ≤ 100          | 16         | 32         |
| ≤ 200          | 32         | 64         |
| ≤ 400          | 64         | 128        |

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>OCP-Server 机器要求的最低配置为 4 核 8 GB 以及 500 GB 可用磁盘空间，当单个主机的租户数量 ≤ 10 时，仍建议 CPU 和内存保持为 4 核 8 GB。</p>
  </main>

### 规划示例

OCP 会以 Docker 的形式部署，如果将 ocp-server, ocp-metadb, ocp-monitordb 部署在同一台物理机上，ocp-metadb 和 ocp-monitordb 可以是一个 OceanBase 集群里面的不同租户，以上述提到的管理 10 台业务 OBServer 所需的资源为例，所需资源如下：

|       部署内容       | CPU（核） | 内存（GB） |
|------------------|--------|--------|
| ocp-server       | 4      | 8      |
| ocp-metadb 租户    | 4      | 8      |
| ocp-monitordb 租户 | 4      | 16     |
| sys 租户           | 5      | 28     |

即这台物理机需要有 24 个 CPU 和 64G 内存。

## 操作系统要求

|  **服务器类型**  | **操作系统**  |  **支持版本**  |
|-------------|-----------|------------|
| x86_64      | RHEL      | 7.2 及以上版本  |
| x86_64      | CentOS    | 7.2 及以上版本  |
| x86_64      | AliOS     | 7.2 及以上版本  |
| x86_64      | openSUSE  | 12 SP3 及以上 |
| ARM aarch64 | AliOS     | 7.2 及以上版本  |
| ARM aarch64 | 中标麒麟      | 7.6        |
| ARM aarch64 | 华为EulerOS | 2.0 SP8    |
